<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í•´ì™¸ ì—¬í–‰ ê²½ë¹„ ê³„ì‚°ê¸° | í™˜ìœ¨ ìë™</title>
<meta name="description" content="ì‹¤ì‹œê°„ í™˜ìœ¨ë¡œ í•´ì™¸ì—¬í–‰ ì´ ê²½ë¹„ì™€ 1ì¸ë‹¹ ë¹„ìš©ì„ ê³„ì‚°í•˜ëŠ” ë¬´ë£Œ ì—¬í–‰ ê³„ì‚°ê¸°">
<link rel="stylesheet" href="style.css" /> <!-- ê¸°ì¡´ ìŠ¤íƒ€ì¼ì‹œíŠ¸ ì—°ê²° -->
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f9;
  padding: 20px;
}
.wrap {
  max-width: 480px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}
label {
  font-weight: bold;
  margin-top: 12px;
  display: block;
}
select, input[type="text"], input[type="number"] {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
.item {
  display: flex;
  gap: 6px;
  margin-top: 8px;
}
.item input {
  flex: 1;
}
.item button {
  background: #ff6b6b;
  border: none;
  color: #fff;
  border-radius: 6px;
  padding: 0 10px;
  cursor: pointer;
}
button.main-button { /* ê³„ì‚°í•˜ê¸°, í•­ëª© ì¶”ê°€ ë²„íŠ¼ì— ì ìš©ë  ìŠ¤íƒ€ì¼ */
  width: 100%;
  margin-top: 12px;
  padding: 12px;
  border-radius: 8px;
  border: none;
  background: #2f80ed;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}
.result {
  margin-top: 20px;
  background: #eef5ff;
  padding: 15px;
  border-radius: 10px;
  font-weight: bold;
  color: #333;
}
header { /* ê¸°ì¡´ í—¤ë” ìŠ¤íƒ€ì¼ ì¶”ê°€ */
  background: #fff;
  padding: 10px 20px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}
header h1 {
  font-size: 24px;
  margin: 0;
}
header nav a {
  margin-left: 15px;
  text-decoration: none;
  color: #2f80ed;
  font-weight: bold;
}
footer { /* ê¸°ì¡´ í‘¸í„° ìŠ¤íƒ€ì¼ ì¶”ê°€ */
  text-align: center;
  padding: 20px;
  margin-top: 40px;
  border-top: 1px solid #eee;
  color: #777;
  font-size: 14px;
}
footer a {
  color: #2f80ed;
  text-decoration: none;
}
</style>
</head>
<body>

<header>
  <h1><a href="index.html" style="text-decoration:none; color:#333;">ì—¬í–‰Â·ì¼ìƒ ê¸°ë¡ & ìƒí™œ ê³„ì‚°ê¸°</a></h1>
  <nav>
    <a href="index.html">í™ˆ</a>
    <a href="about.html">ì†Œê°œ</a>
    <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
  </nav>
</header>

<div class="wrap">
  <h2>ğŸŒ í•´ì™¸ ì—¬í–‰ ê²½ë¹„ ê³„ì‚°ê¸°</h2>

  <label for="currency">í†µí™” ì„ íƒ</label>
  <select id="currency">
    <option value="USD">ë¯¸êµ­ ë‹¬ëŸ¬ (USD)</option>
    <option value="JPY">ì¼ë³¸ ì—” (JPY)</option>
    <option value="EUR">ìœ ë¡œ (EUR)</option>
    <option value="CNY">ì¤‘êµ­ ìœ„ì•ˆ (CNY)</option>
    <option value="GBP">ì˜êµ­ íŒŒìš´ë“œ (GBP)</option>
  </select>

  <label for="rate">í™˜ìœ¨ (ìë™, KRW ê¸°ì¤€)</label>
  <input type="number" id="rate" readonly>

  <label>ê²½ë¹„ í•­ëª©</label>
  <div id="items"></div>

  <button onclick="addItem()" class="main-button">+ í•­ëª© ì¶”ê°€</button>

  <label for="people">ì¸ì›ìˆ˜</label>
  <input type="number" id="people" value="1" min="1">

  <button onclick="calculate()" class="main-button">ê³„ì‚°í•˜ê¸°</button>

  <div id="result" class="result">
    ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
  </div>
</div>

<footer>
  <p>Â© 2026 ê°œì¸ ë¸”ë¡œê·¸. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ . All rights reserved.</p>
  <p>
    <a href="about.html">ì†Œê°œ</a> | 
    <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
    <a href="index.html#contact">ë¬¸ì˜</a>
  </p>
</footer>

<script>
const itemsDiv = document.getElementById('items');

// ì´ˆê¸° í•­ëª© ì¶”ê°€ í•¨ìˆ˜ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
function addItem(name = '', cost = '') {
  const div = document.createElement('div');
  div.className = 'item';
  div.innerHTML = `
    <input type="text" placeholder="í•­ëª©ëª…" value="${name}">
    <input type="number" placeholder="ê¸ˆì•¡" value="${cost}">
    <button onclick="this.parentElement.remove()">X</button>
  `;
  itemsDiv.appendChild(div);
}

// í™˜ìœ¨ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
async function fetchRate() {
  const currency = document.getElementById('currency').value;
  try {
    // API í˜¸ì¶œ ì‹œ CORS ë¬¸ì œ ë°œìƒ ê°€ëŠ¥ì„±, proxy í•„ìš” ë˜ëŠ” ë‹¤ë¥¸ ê³µê°œ API ê³ ë ¤
    // exchabgerate.host APIëŠ” ë¬´ë£Œ í”Œëœì—ì„œ rate limitì´ ìˆì„ ìˆ˜ ìˆìŒ
    // ì´ ì˜ˆì œì—ì„œëŠ” ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ API í˜¸ì¶œì„ ìœ ì§€í•˜ë‚˜, ì‹¤ì œ ìš´ì˜ì‹œ ì•ˆì •ì ì¸ í™˜ìœ¨ API ì‚¬ìš© ê¶Œì¥
    const res = await fetch(`https://api.exchangerate.host/latest?base=${currency}&symbols=KRW`);
    if (!res.ok) { // ì‘ë‹µì´ ì„±ê³µì ì¸ì§€ í™•ì¸
        throw new Error(`HTTP error! status: ${res.status}`);
    }
    const data = await res.json();
    if (data.rates && data.rates.KRW) {
        document.getElementById('rate').value = data.rates.KRW.toFixed(2);
    } else {
        document.getElementById('rate').value = 0;
        console.error('API ì‘ë‹µì—ì„œ KRW í™˜ìœ¨ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
  } catch (error) {
    document.getElementById('rate').value = 0;
    console.error('í™˜ìœ¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
  }
}

// ê³„ì‚° í•¨ìˆ˜ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
function calculate() {
  let total = 0;
  document.querySelectorAll('.item').forEach(item => {
    // children[1]ì€ ê¸ˆì•¡ ì…ë ¥ í•„ë“œ
    total += Number(item.children[1].value) || 0;
  });

  const rate = Number(document.getElementById('rate').value) || 0;
  const people = Number(document.getElementById('people').value) || 1;

  if (rate === 0) {
      document.getElementById('result').innerHTML = `í™˜ìœ¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`;
      return;
  }
  if (people < 1) {
      document.getElementById('result').innerHTML = `ì¸ì›ìˆ˜ëŠ” 1ëª… ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.`;
      return;
  }

  const totalKRW = total * rate;
  const perPerson = people > 0 ? Math.round(totalKRW / people) : 0; // peopleì´ 0ì¼ ê²½ìš° NaN ë°©ì§€

  document.getElementById('result').innerHTML = `
    <p>ì´ ì—¬í–‰ê²½ë¹„: <strong>${totalKRW.toLocaleString()}ì›</strong></p>
    <p>1ì¸ë‹¹ ë¹„ìš©: <strong>${perPerson.toLocaleString()}ì›</strong></p>
  `;
}

// ì´ˆê¸° ë¡œë”© ì‹œ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', () => {
    // ì´ˆê¸° í•­ëª© ì¶”ê°€
    addItem('í•­ê³µê¶Œ', 1000); // ì˜ˆì‹œ ê¸ˆì•¡ ì¶”ê°€
    addItem('ìˆ™ì†Œ', 500);
    addItem('ì‹ë¹„', 300);
    
    // í™˜ìœ¨ ê°€ì ¸ì˜¤ê¸°
    fetchRate();
    // í†µí™” ë³€ê²½ ì‹œ í™˜ìœ¨ ì—…ë°ì´íŠ¸
    document.getElementById('currency').addEventListener('change', fetchRate);
});
</script>

</body>
</html>
